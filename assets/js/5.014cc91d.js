(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{243:function(t,a,n){t.exports=n.p+"assets/img/countdown.da756c77.png"},244:function(t,a,n){t.exports=n.p+"assets/img/utf8.e1140a3f.png"},245:function(t,a,n){t.exports=n.p+"assets/img/py2_test.5a865355.png"},246:function(t,a,n){t.exports=n.p+"assets/img/unicodedata.d4a4907b.png"},273:function(t,a,n){"use strict";n.r(a);var e=n(2),s=Object(e.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"python里的ascii-unicode与utf-8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#python里的ascii-unicode与utf-8","aria-hidden":"true"}},[t._v("#")]),t._v(" Python里的ASCII,Unicode与UTF-8")]),t._v(" "),e("p",[t._v("去年开始做NLP工作的时候，因为对Python2/3中的字符串理解不够透彻，犯了一些比较naive的错误，最近看到下图越发觉得时间紧迫，于是把最近补的知识点和踩过的坑记录如下, keep calm and carry on\n"),e("img",{attrs:{src:n(243),alt:"countdown"}})]),t._v(" "),e("h2",{attrs:{id:"_1-什么是ascii，unicode，与utf-8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是ascii，unicode，与utf-8","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. 什么是ASCII，Unicode，与UTF-8")]),t._v(" "),e("h3",{attrs:{id:"_1-1-ascii"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-ascii","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.1 ASCII")]),t._v(" "),e("p",[t._v("ASCII大概是我最早接触的最早的计算机相关词汇之一了，毕竟小学微机课都在听老师用口音很重的英语提及这个词😂ASCII码使用指定的7位或8位二进制数组合来表示128或256种可能的字符。标准ASCII码也叫基础ASCII码，使用7位二进制数（只占用了一个字节的后面7位，最前面的一位统一规定为0），来表示所有的大写和小写字母，数字0 到9、标点符号， 以及在美式英语中使用的特殊控制字符。如大写字母A的ASCII码为65。")]),t._v(" "),e("h3",{attrs:{id:"_1-2-unicode：字符集"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-unicode：字符集","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.2 Unicode：字符集")]),t._v(" "),e("p",[t._v("所幸英文字母数目有限，用ASCII码就可以完全表示。但是世界上的语言种类繁多，常用汉字少说5000个，法语等语言中有注音符号，所以需要一种编码方式，将世界上所有的符号都纳入其中，每一个符号都给予一个独一无二的编码，它就是英勇的Unicode！具体的符号对应表，可以查询"),e("a",{attrs:{href:"http://www.unicode.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Unicode官网"),e("OutboundLink")],1),t._v("，或者专门的"),e("a",{attrs:{href:"http://www.chi2ko.com/tool/CJK.htm",target:"_blank",rel:"noopener noreferrer"}},[t._v("汉字对应表"),e("OutboundLink")],1),t._v("。\n但是，Unicode只是一个符号集，它只规定了符号的二进制代码，却没有规定这个二进制代码应该如何存储。对英文字母来说，用Unicode编码时，每个字符使用3～4个Bytes表示，那么英文字母前会有2～3个Bytes是0，相当浪费存储空间。")]),t._v(" "),e("h3",{attrs:{id:"_1-3-utf-8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-utf-8","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.3 UTF-8")]),t._v(" "),e("p",[t._v("第一次看到“UTF-8是Unicode是一种实现方式”时，我是蒙圈的，内心OS是“Unicode都已经编码好了，为啥还要实现呢”。但是了解了原理之后便恍然大悟：UTF-8是一种针对Unicode的"),e("strong",[t._v("可变长")]),t._v("度字符编码，使用1~4个Bytes表示一个符号，根据不同的符号而变化字节长度。下图展示了UTF-8的编码规则，\n"),e("img",{attrs:{src:n(244),alt:"UTF8"}}),t._v("\n以汉字“王”为例，王对应的Unicode字符为738B（0111 0011 1000 1011），“王”处在第三行表示的范围内，把0111 0011 1000 1011 填在xxx对应的地方，出来的UTF-8编码便是1110 0111 1000 1110 1000 1011（十六进制E7 8E 8B），用Python2验证一下✌️\n"),e("img",{attrs:{src:n(245),alt:"py2_test"}})]),t._v(" "),e("h2",{attrs:{id:"_2-python2与python3里的字符串"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-python2与python3里的字符串","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. Python2与Python3里的字符串")]),t._v(" "),e("p",[t._v("絮叨：Unicode才是真正的字符串，而用ASCII、UTF-8等字符编码表示的是字节串")]),t._v(" "),e("h3",{attrs:{id:"_2-1-python2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-python2","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.1 Python2")]),t._v(" "),e("p",[t._v("Python2里的默认编码是"),e("strong",[t._v("ASCII")]),t._v("，Python2解释器拿到一份字节码时，如果没有设置编码方式，会用ASCII进行解码。Python2里的str，可以称之为“字节串”，它是Unicode经过编码后的字节组成的序列。譬如说Python2中的len('王')=3，这个3，便是经UTF-8编码后的字节的长度（如上图所示）。")]),t._v(" "),e("h3",{attrs:{id:"_2-2-python3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-python3","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.2 Python3")]),t._v(" "),e("p",[t._v("Python3里的默认编码是"),e("strong",[t._v("UTF-8")]),t._v("，人性了很多对伐！Python3中的str已经是真正的字符串，len()表示的Unicode的长度，而字节是用单独的bytes类来表示。")]),t._v(" "),e("h2",{attrs:{id:"_3-一个小例子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-一个小例子","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. 一个小例子")]),t._v(" "),e("p",[t._v("我在做文本清洗的时，有时需要把法语的注音符号（即不能用ASCII编码的地方）去掉，也就是把Unicode str变成plain ASCII，示例代码如下")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("unicodeToAscii")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        c "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" c "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" unicodedata"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("normalize"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NFD'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" s"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" unicodedata"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("category"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Mn'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Mn stands  for nonspacing_Mask")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("关于unicodedata.normalize的用法，说明如下\n"),e("img",{attrs:{src:n(246),alt:"unicodedata.normalize"}})]),t._v(" "),e("h2",{attrs:{id:"参考资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),e("p",[t._v("[1] "),e("a",{attrs:{href:"https://www.jianshu.com/p/19c74e76ee0a",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python2与Python3的字符编码与解码"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("[2] "),e("a",{attrs:{href:"https://blog.csdn.net/Deft_MKJing/article/details/79460485",target:"_blank",rel:"noopener noreferrer"}},[t._v("ASCII，Unicode和UTF-8终于找到一个能完全搞清楚的文章了"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("[3] "),e("a",{attrs:{href:"https://stackoverflow.com/a/518232/2809427",target:"_blank",rel:"noopener noreferrer"}},[t._v("What is the best way to remove accents in a Python unicode string?\n"),e("OutboundLink")],1)])])},[],!1,null,null,null);a.default=s.exports}}]);